(()=>{"use strict";const e=window.React,t=window.wp.i18n,a=window.wp.element,n=window.wp.components,o=window.wp.blockEditor,i=window.wp.compose,l=window.wp.primitives,r=(0,i.createHigherOrderComponent)((i=>r=>{const{attributes:s,setAttributes:c}=r,{animation:m}=s,b=(0,a.useRef)(),p=(0,a.useRef)(),[_,u]=(0,a.useState)(!1),d=[{label:(0,t.__)("Default","carbon-blocks"),help:(0,t.__)("","carbon-blocks"),options:[{label:(0,t.__)("Linear","carbon-blocks"),slug:"linear",path:"M1 84L124 0"},{label:(0,t.__)("Ease","carbon-blocks"),slug:"ease",path:"M1 84C60 55 53.75 0 124 1"}]},{label:(0,t.__)("Ease","carbon-blocks"),options:[{label:(0,t.__)("In","carbon-blocks"),slug:"ease-in",path:"M 1 84 c 43 -1 57 -2 123 -83"},{label:(0,t.__)("Out","carbon-blocks"),slug:"ease-out",path:"M 0 84 C 64 8 73 4 123 0"},{label:(0,t.__)("In | Out","carbon-blocks"),slug:"ease-in-out",path:"M 0 84 C 68 84 55 1 123 0"}]}],g=()=>{setTimeout((()=>{const e=document.querySelector(`[data-block="${r.clientId}"]`);e.classList.remove("anim"),e.classList.add("is-hidden"),e.removeAttribute("data-anim-delay"),e.setAttribute("data-anim",m.type),e.setAttribute("data-anim-duration",m.duration),e.setAttribute("data-anim-easing",m.easing),setTimeout((()=>{e.classList.remove("is-hidden"),e.classList.add("anim"),setTimeout((()=>{e.removeAttribute("data-anim")}),m.duration)}),100)}),200)};return m?(0,e.createElement)(a.Fragment,null,(0,e.createElement)(i,{...r,ref:p}),_&&(0,e.createElement)(n.Modal,{className:"carbon-blocks-animation-modal",title:(0,t.__)("Preview block animation","carbon-blocks"),onRequestClose:()=>u(!1)},(0,e.createElement)(n.Button,{__next40pxDefaultSize:!0,isPrimary:!0,style:{textAlign:"center",display:"block",width:"100%"},onClick:g,ref:b},(0,t.__)("Replay animation","carbon-blocks"))),(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,t.__)("Animation","carbon"),initialOpen:!0,icon:"video-alt"},(0,e.createElement)(n.ToggleControl,{label:(0,t.__)("Activate animation","carbon-blocks"),checked:m.isActive,onChange:()=>c({animation:{...m,isActive:!m.isActive}}),help:(0,t.__)("Animate the block when he shows up on the screen.","carbon-blocks")}),m.isActive&&(0,e.createElement)(n.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,t.__)("Delay and repeat are not visible in preview.","carbon-blocks")},(0,e.createElement)(n.Button,{__next40pxDefaultSize:!0,isPrimary:!0,style:{textAlign:"center",display:"block",width:"100%"},onClick:g},(0,t.__)("Preview animation","carbon-blocks"))),m.isActive&&(0,e.createElement)(n.TabPanel,{orientation:"horizontal",initialTabName:"type",__nextHasNoMarginBottom:!0,tabs:[{name:"type",title:"Type"},{name:"timing",title:"Timing"},{name:"easing",title:"Easing"}]},(a=>{switch(a.name){case"type":return(0,e.createElement)(n.PanelBody,null,(0,e.createElement)(n.__experimentalToggleGroupControl,{isBlock:!0,label:"Default",value:m.type,onChange:e=>c({animation:{...m,type:e}}),__nextHasNoMarginBottom:!0},(0,e.createElement)(n.__experimentalToggleGroupControlOption,{label:"Fade in",value:"fade"})),(0,e.createElement)(n.__experimentalToggleGroupControl,{isBlock:!0,label:"Slinding animation",value:m.type,onChange:e=>c({animation:{...m,type:e}}),__nextHasNoMarginBottom:!0},(0,e.createElement)(n.__experimentalToggleGroupControlOption,{label:"Up",value:"slide-up"})));case"timing":return(0,e.createElement)(n.PanelBody,null,(0,e.createElement)(n.ToggleControl,{label:(0,t.__)("Repeat animation","carbon-blocks"),checked:m.repeat,onChange:()=>c({animation:{...m,repeat:!m.repeat}}),help:(0,t.__)("Defines if animation should repeat every time it appears on the screen.","carbon-blocks")}),(0,e.createElement)(n.RangeControl,{help:(0,t.__)("Time before the animation triggers (in ms).","carbon-blocks"),initialPosition:m.delay,label:(0,t.__)("Delay speed","carbon-blocks"),max:1e3,min:0,step:100,onChange:e=>c({animation:{...m,delay:e}})}),(0,e.createElement)(n.RangeControl,{help:(0,t.__)("Animation duration time (in ms).","carbon-blocks"),initialPosition:m.duration,label:(0,t.__)("Duration speed","carbon-blocks"),max:2e3,min:0,step:100,onChange:e=>c({animation:{...m,duration:e}})}));case"easing":return(0,e.createElement)(n.PanelBody,null,(0,e.createElement)(n.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,t.__)("Easing controls how your animation will behave. Hover any label to see the Cubic Bezier Curve.","carbon-blocks")}),d.map((t=>(0,e.createElement)(n.__experimentalToggleGroupControl,{isBlock:!0,label:t.label,value:m.easing,onChange:e=>c({animation:{...m,easing:e}}),__nextHasNoMarginBottom:!0,help:t?.help},t.options.map((t=>(0,e.createElement)(n.__experimentalToggleGroupControlOption,{label:t.label,value:t.slug,"aria-label":(0,e.createElement)(l.SVG,{viewBox:"0 0 125 85",xmlns:"http://www.w3.org/2000/svg",width:"100px",height:"auto"},(0,e.createElement)(l.Path,{d:t.path,fill:"none",stroke:"currentColor",strokeWidth:"3px",strokeLinecap:"round "})),showTooltip:!0})))))))}}))))):(0,e.createElement)(i,{...r})}),"animation");wp.hooks.addFilter("editor.BlockEdit","carbon-blocks/animation",r)})();